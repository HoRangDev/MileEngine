#pragma once
#include "Mile.h"
#include "MileString.h"

namespace Mile
{
    /*
    * @todo: 기본 능력 확장 ( 직렬화, UUID, RTTI, 메모리관리<고민해보기> ) 
    */
    class MILE_API MileObject
    {
    public:
        inline MileObject( const MString& NewName = MString( TEXT("UNKNOWN") ), bool IsValid = true ) :
            Name( NewName ),
            bIsValid( IsValid ),
            ObjectID( NumOfAllocatedObject )
        {
            ++NumOfAllocatedObject;
            ++ObjectCounting;
        }

        MileObject( const MileObject& CopiedObject ) :
            Name( CopiedObject.Name ),
            bIsValid( CopiedObject.bIsValid ),
            ObjectID( NumOfAllocatedObject )
        {
            ++NumOfAllocatedObject;
            ++ObjectCounting;
        }

        MileObject( MileObject&& MovedObject ) :
            Name( std::move( MovedObject.Name ) ),
            bIsValid( MovedObject.bIsValid )
        {
        }

        virtual ~MileObject( )
        {
            --ObjectCounting;
        }

        void SetName( const MString& NewName )
        {
            Name = NewName;
        }

        MString GetName( ) const
        {
            return Name;
        }

        uint64 GetObjectID( ) const
        {
            return ObjectID;
        }

        static uint64 GetObjectCount()
        {
            return ObjectCounting;
        }

    private:
        static uint64                NumOfAllocatedObject;
        static uint64                ObjectCounting;
        /* ObjectID 는 이때까지 만들어진 Object의 갯수로 할당됨. */
        uint64                       ObjectID;
        MString                      Name;
        bool                         bIsValid;

    };
}